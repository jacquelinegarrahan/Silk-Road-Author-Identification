<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="robots" content="noindex" />
		<link rel="canonical" href="http://dkn255hz262ypmii.onion/index.php?topic=209572.0" />
		<title>Print Page - Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</title>
		<style type="text/css">
			body, a
			{
				color: #000;
				background: #fff;
			}
			body, td, .normaltext
			{
				font-family: Verdana, arial, helvetica, serif;
				font-size: small;
			}
			h1#title
			{
				font-size: large;
				font-weight: bold;
			}
			h2#linktree
			{
				margin: 1em 0 2.5em 0;
				font-size: small;
				font-weight: bold;
			}
			dl#posts
			{
				width: 90%;
				margin: 0;
				padding: 0;
				list-style: none;
			}
			dt.postheader
			{
				border: solid #000;
				border-width: 1px 0;
				padding: 4px 0;
			}
			dd.postbody
			{
				margin: 1em 0 2em 2em;
			}
			table
			{
				empty-cells: show;
			}
			blockquote, code
			{
				border: 1px solid #000;
				margin: 3px;
				padding: 1px;
				display: block;
			}
			code
			{
				font: x-small monospace;
			}
			blockquote
			{
				font-size: x-small;
			}
			.smalltext, .quoteheader, .codeheader
			{
				font-size: x-small;
			}
			.largetext
			{
				font-size: large;
			}
			.centertext
			{
				text-align: center;
			}
			hr
			{
				height: 1px;
				border: 0;
				color: black;
				background-color: black;
			}
		</style>
	</head>
	<body>
		<h1 id="title">Silk Road forums</h1>
		<h2 id="linktree">Discussion => Security => Topic started by: Bazille on September 02, 2013, 08:09 pm</h2>
		<dl id="posts">
			<dt class="postheader">
				Title: <strong>Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 02, 2013, 08:09 pm</strong>
			</dt>
			<dd class="postbody">
				This is a step-by-step tutorial explaining how to create a bootable USB stick with VirtualBox and encrypted Whonix. <br />If you&#039;ve never used Linux before you should be able to complete the tutorial anyway, as every necessary step is mentioned.<br /><br />With this system you have the portability of a persistent Tails with the additional security of Tor entry guards and virtual machines.<br />The tutorial also explains how to optionally tunnel Tor through a OpenVPN connection in ninja mode (cover traffic through torrents).<br /><br />You can boot the USB stick on any modern computer with AMD or Intel processor, including Macs (if they support booting from USB sticks).<br /><br />The host OS (Xubuntu) will not be encrypted, so make sure you don&#039;t use Xubuntu for storing sensitive data or incriminating Google searches.<br />Only use the encrypted Whonix virtual machines for that. Xubuntu will not hide that you were using TrueCrypt and VirtualBox with Whonix, so there is no plausible deniability.<br /><br />There can be better performance than with this type of Whonix installation on a USB stick, however this is the most portable one. You can also easily throw it away without leaving any traces on your main OS.<br /><br />You must use a quality USB stick with decent speed. Cheap CNMemory USB sticks will most likely not always work reliably and will be annoyingly slow. <br />The Whonix installation process may fail or freeze a lot with low quality USB sticks. <br />However even if the installation to the USB stick freezes, the usability of the system may later be acceptable.<br />You could also use a USB hard drive.<br /><br />The tutorial works with Whonix 0.5.6, it&#039;s uncertain whether it will work properly with a new Whonix version on a 8GB USB stick.<br /><br />System requirements:<br />* Computer with modern AMD or Intel CPU (recommended: 64-bit with multiple cores)<br />* 4GB RAM<br />* 8GB quality USB stick (recommended: USB3, if your computer has USB3 ports)<br /><br />Time needed: 3+ hours<br />Skill needed: being able to use a keyboard and mouse<br /><br />CC-BY Bernd Liefert, 02.09.2013<br />Updated 08.09.2013
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 02, 2013, 08:10 pm</strong>
			</dt>
			<dd class="postbody">
				1. Downloads<br /><br />For this tutorial we use Xubuntu 12.04, because the size is smaller than Xubuntu 13.04. <br />You might as well use Lubuntu, but you shouldn&#039;t use anything else than Xubuntu or Lubuntu if you only have 4GB RAM and 8GB USB stick.<br /><br />If you have a 64bit Intel or AMD CPU download this image:<br />http://se.archive.ubuntu.com/mirror/cdimage.ubuntu.com/xubuntu/releases/12.04/release/xubuntu-12.04.3-desktop-amd64.iso<br /><br />If you have a 32bit CPU download this image:<br />http://se.archive.ubuntu.com/mirror/cdimage.ubuntu.com/xubuntu/releases/12.04/release/xubuntu-12.04.3-desktop-i386.iso<br /><br />If the above images are not available any longer, you can download the latest Xubuntu images from here:<br />http://se.archive.ubuntu.com/mirror/cdimage.ubuntu.com/xubuntu/releases/12.04/release/<br /><br /><br />Download UNetBootin for your OS, this tutorial will most likely not work with Pendrive Linux USB Installer.<br />http://unetbootin.sourceforge.net/<br /><br /><br />If you use Windows, download EaseUS Partition Master:<br />http://www.partition-tool.com/personal.htm<br /><br /><br />Download the latest version of Whonix-Gateway.ova and Whonix-Workstation.ova:<br />https://www.whonix.org/wiki/Download<br /><br />Note that if you download Whonix over the clearnet, some secret service may know that you downloaded it. That could be seen as suspicious. You may want to use a VPN, Tor or an internet cafe to download it.<br />https://www.whonix.org/wiki/Hide_Tor_and_Whonix_from_your_ISP<br />http://zo7fksnun4b4v4jv.onion/wiki/Hide_Tor_and_Whonix_from_your_ISP<br /><br /><br />2. Preparing the USB stick<br /><br />First we need to partition the USB stick. You can do this with GParted under Linux or EaseUS Partition Master under Windows. If you use a Mac, find a partitioning tool which can deal with USB sticks.<br />We will delete the partition(s) on the USB stick and create 2 new partitions.<br /><br />This part of the manual describes how to do prepare the USB stick with EaseUS PM, it&#039;s not much different with other partition tools however.<br /><br />Select the partitions to delete (if you have one hard drive in your system you would have to select Disk 3 in EaseUS PM) and click the Delete button.<br />Now the entire space of the USB stick should display &quot;Unallocated&quot;.<br />Click the &quot;Apply&quot; button to write the changes to the USB stick. All data on the USB stick will be lost after clicking the Apply button.<br /><br />Select the Unallocated space on the USB stick and click the &quot;Create&quot; button.<br />Change &quot;Logical&quot; to &quot;Primary&quot; and change the file system to FAT32.<br />Change the size of the partition to about 1350MB and click OK. You can make it 2000MB if you use a 16GB USB stick, but that&#039;s not really necessary, unless you want to use Xubuntu for more than just starting TrueCrypt and VirtualBox.<br /><br />Select the Unallocated space on the USB stick and click the &quot;Create&quot; button.<br />If there is a warning about Windows not recognizing stuff, click Yes.<br />The partition will use the rest of your USB stick, about 6300MB on a 8GB USB stick.<br />Give the new partition a descriptive label, e.g. Krypton.<br />Change &quot;Logical&quot; to &quot;Primary&quot;, change the file system to NTFS and click OK.<br /><br />Click the &quot;Apply&quot; button to write the changes to the USB stick. Close the partitioning program when done.<br /><br /><br />3. Using UNetBootin to install Xubuntu to the USB stick<br /><br />Start UNetBootin and click the &quot;...&quot; button to select the Xubuntu*.iso you&#039;ve downloaded.<br />Change the amount of persistent Ubuntu storage to 500MB. You can make it 1000MB if you use a 16GB USB stick, but that&#039;s not really necessary.<br />Make sure the right USB stick is selected, then click OK.<br /><br />When the installation is done, you can reboot the computer and boot from the USB stick. It is assumed that you already know how boot from USB. Use Google or ask in this thread if you don&#039;t.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 02, 2013, 08:10 pm</strong>
			</dt>
			<dd class="postbody">
				4. Setting up Xubuntu<br /><br />Boot from the USB stick and press Enter at UNetBootin boot menu to start Xubuntu.<br /><br />4.1. (Optional) Change keyboard layout<br /><br />If you&#039;re not from the USA you may have to change the keyboard layout.<br /><br />Click the start button on the upper left on the Xubuntu desktop and go to<br />Settings -&gt; Settings Manager -&gt; Keyboard<br /><br />Select the Layout tab and uncheck &quot;Use system defaults&quot;.<br />Click the &quot;Add&quot; button, select your keyboard layout (optionally select a variant) and click OK.<br />Select &quot;English(US)&quot;, click the &quot;Delete&quot; button and &quot;Close&quot;.<br /><br />4.2. Install VirtualBox<br /><br />Click the start button on the upper left on the Xubuntu desktop and start Ubuntu Software Center.<br />In the search box enter &quot;virtualbox&quot;.<br />Select the &quot;VirtualBox&quot; icon and click the now visible Install button.<br /><br />When the installation is done, close the Ubuntu Software Center window and proceed to the next step.<br /><br />4.3. Install TrueCrypt<br /><br />Click the Xubuntu start button and start the Web Browser.<br />Go to http://www.truecrypt.org/downloads and download the appropriate Linux version of TrueCrypt.<br />If you are using the amd64 version of Xubuntu, select the &quot;Standard 64-bit&quot; version, otherwise select the 32-bit version.<br /><br />On the Xubuntu desktop, doubleclick the Home -&gt; Downloads folder.<br />Click the truecrypt archive icon with the right mouse button and select Extract Here.<br />Doubleclick the truecrypt-*-setup icon, click Install TrueCrypt, agree with the license agreement and click OK.<br />Press Enter to exit when prompted.<br /><br />Delete the files from the Downloads folder.<br /><br /><br />5. Setting up TrueCrypt<br /><br />We are using TrueCrypt for encryption because it&#039;s easier to setup for Linux novices.<br />We are using a TrueCrypt container because this is easier to backup later.<br /><br />To increase the performance during the installation you could create the TrueCrypt container on your hard drive instead, and copy it to the Krypton folder later.<br />Writing data (installing) to the USB stick is slower than reading data (booting, running programs).<br />You do need to know how much space is left in the Krypton folder however, so the TrueCrypt container won&#039;t be too large.<br /><br />5.1. Creating the TrueCrypt container<br /><br />Click the Xubuntu start button and start Accessories -&gt; TrueCrypt.<br />Click &quot;Create Volume&quot; and click Next to create an encrypted file container.<br />Click Next to create a standard TrueCrypt volume.<br />Uncheck &quot;Never save history&quot; and click the Select File button.<br />On the right side of the window, select the Krypton folder, enter a name on the top of the window, e.g. kryptonite, and click Save.<br />Click Next to get to the encryption algorithm selection.<br /><br />Select either AES-Twofish (fastest, double encryption), Serpent-AES (slower, stronger double encryption) or AES-Twofish-Serpent (slowest but triple encryption) as Encryption Algorithm.<br />Select Whirlpool as Hash Algorithm.<br /><br />If you have a slow computer you may want to use AES and RIPEMD, but those can be cracked faster. Police won&#039;t be able to crack it in reasonable time, but the NSA may be able to.<br />Try the benchmark to see how fast they are on your computer. 100mb/s should be enough, as USB2 sticks are way slower than that anyway. So encryption is still faster than your USB stick.<br /><br />Click Next and enter the size of the TrueCrypt volume to be created. <br />On an 8GB USB stick it should show about 6.2 GB available, enter 6200 (MB). If there is more space on<br />your USB stick, make it larger.<br /><br />Enter a strong password for the volume. The password should have more than 20 characters and numbers and the words shouldn&#039;t be found in a dictionary.<br />Click Next and select &quot;I will store files larger than 4GB on the volume&quot;.<br />Click Next and select Linux Ext2 as filesystem type.<br />Click Next because we may want to mount the volume on another OS in future.<br />Move your mouse around randomly for 30 seconds over the TrueCrypt window, then click Format.<br /><br />This can take a while, depending on the quality of your USB stick.<br /><br />TrueCrypt may freeze when the format is done 100%. If it freezes for longer than a few minutes, simply reboot the system by clicking the<br />Xubuntu start button -&gt; Log Out -&gt; Restart<br /><br />5.2. Mounting the TrueCrypt container<br /><br />Start Accessories -&gt; TrueCrypt again, if you had to reboot in the last step.<br />If you didn&#039;t have to reboot, click Dismount All in the TrueCrypt window.<br /><br />Select Slot 1 in the TrueCrypt window and click the Select File button.<br />Select Krypton -&gt; kryptonite and click Open.<br />Click the Mount button and enter the encryption password.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 02, 2013, 08:14 pm</strong>
			</dt>
			<dd class="postbody">
				6. Setting up VirtualBox<br /><br />Click the Xubuntu start button -&gt; Accessories -&gt; VirtualBox.<br />In the VirtualBox Manager, click File -&gt; Preferences.<br />Click the Default Machine Folder selector and select Other...<br />On the right side of the window select the &quot;truecrypt1&quot; folder and click Open.<br />Click OK to close the VirtualBox Settings window.<br /><br />6.1. Importing Whonix<br /><br />In the VirtualBox Manager, click File -&gt; Import Appliance.<br />Click Choose and find the Whonix-Gateway.ova file you&#039;ve downloaded.<br />Click Next, in the next window click Import.<br /><br />This can take a few minutes, depending on the quality of your USB stick. It shouldn&#039;t take more than 3-4 minutes.<br /><br />In the VirtualBox Manager, click File -&gt; Import Appliance.<br />Click Choose and find the Whonix-Workstation.ova file you&#039;ve downloaded.<br />Click Next, in the next window click Import.<br /><br />This can take 10+ minutes, depending on the quality of your USB stick. If it takes much longer than 10 minutes than your USB stick sucks.<br /><br />6.2. Setting up Whonix<br /><br />To increase the speed on multicore CPU&#039;s the virtual machine settings have to be changed.<br /><br />In the VirtualBox Manager, select Whonix-Workstation and click the Settings button.<br />Go to System -&gt; Processor and increase the number of Processors to the number of cores your CPU has.<br />Click OK to close the settings window and increase the number of processors of the Whonix-Gateway.<br /><br />It is not recommended to change any other virtual machine settings. E.g. don&#039;t increase the memory size.<br /><br />6.2.1. Whonix Gateway<br /><br />In the VirtualBox Manager, select Whonix-Gateway and click the Start arrow.<br />Click OK to dismiss any popup windows.<br /><br />You should see a command prompt (user@host:~$) after the gateway is booted. <br />Wait 60 seconds until whonixcheck starts and tests the network connection.<br />You should see the messages &quot;You are successfully using Tor&quot; and &quot;Checking for operating system updates...&quot;.<br /><br />If instead there is an error message after 2 minutes, enter &quot;whonixcheck&quot; at the command prompt.<br />If you see an error message again you have to repeat this, until you are successfully using Tor and Whonix is checking for operating system updates.<br /><br />The update check can take 10+ minutes to complete, depending on the current speed of the Tor circuit.<br />Wait until you see the &quot;Last run .... of Network Time Synchronization...&quot; message.<br /><br />6.2.1.1. (Optional) Change keyboard layout<br /><br />If you are not from the USA, you may have to change the keyboard layout.<br />At the command prompt enter <br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo dpkg-reconfigure console-data</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>You may have to use your numpads &quot;-&quot; key, depending on your keyboard.<br />Enter the password &quot;changeme&quot; when prompted.<br />Use the cursor keys to select &quot;Select keymap from arch list&quot; and press Enter.<br />Select the appropriate keyboard layout family for your country, then select the keyboard layout and a keyboard variant.<br /><br />6.2.2.2. Update Whonix-Gateway software packages<br /><br />At the command prompt enter<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter the password &quot;changeme&quot; if prompted.<br />Enter &quot;y&quot; to continue the software update when prompted.<br /><br />Updated packages will get downloaded now. This can take 10+ minutes, depending on the speed of the current Tor circuit.<br />When the downloads are finished you will probably get prompted about configuration file updates. Just press Enter when there are any questions.<br /><br />When the installation process is finished and you see the command prompt (user@host:~$) again, proceed to the next step.<br /><br /><br />6.2.2. Whonix Workstation<br /><br />In the VirtualBox Manager, select Whonix-Workstation and click the Start arrow.<br />Click OK to dismiss any popup windows.<br /><br />When the Whonix desktop is booted you should see the whonixcheck time synchronization window.<br /><br />You may want to wait 3+ minutes until the whonixcheck time synchronization window disappears, otherwise the desktop may be a little unresponsive.<br />The speed of this process depends on the quality of your USB stick and the current Tor circuit speed.<br /><br />When the larger whonixcheck window appear, click OK to close it.<br /><br />When the mouse pointer gets captured by the virtual machine you can uncapture it again by clicking the right CTRL key on the keyboard.<br /><br />6.2.2.1. (Optional) Change keyboard layout<br /><br />If you are not from the USA, you may have to change the keyboard layout.<br /><br />Click the K(DE) start button on the lower left and select System Settings.<br />Click the Input Devices icon and select the Layouts tab.<br />Check &quot;Configure layouts&quot; and click the Add button.<br />Click the &quot;Limit selection by language&quot; selector and choose your language.<br />Click the &quot;Layout&quot; selector and choose your language.<br />Click OK to close the selection window, select &quot;us English (US)&quot; and click the Remove button.<br />Click the Apply button and close the keyboard settings window.<br /><br />6.2.2.2. Update Whonix-Workstation software packages<br /><br />Doubleclick the Konsole icon on the Whonix desktop and enter<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo apt-get update &amp;&amp; sudo apt-get dist-upgrade</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter the password &quot;changeme&quot; when prompted and enter &quot;y&quot; when prompted to start the package downloads.<br /><br />Updated packages will get downloaded now. This can take 45+ minutes, depending on the speed of the current Tor circuit.<br />When the downloads are finished you will probably get prompted about configuration file updates. Just press Enter when there are any questions.<br /><br />When the installation process is finished (this can take 30+ minutes) and you see the command prompt (user@host:~$) again, <br />enter &quot;sudo reboot&quot; in the Konsole window to reboot the Whonix workstation.<br /><br />6.2.2.3. (Optional) VirtualBox Guest Additions<br /><br />To be able to use Whonix in full screen resolution or simply resize the virtual machine window we need to install the VirtualBox Guest Additions.<br />This will also stop the mouse pointer from getting captured by the virtual machine and enables you to turn on clipboard sharing (not recommended)<br />and shared folders (not recommended).<br /><br />Note that the installation of the guest additions is not recommended by the Whonix developer.<br />Have a look at this page and the links to see why, do not follow the instructions on that page however:<br /><br />http://zo7fksnun4b4v4jv.onion/wiki/VirtualBox_Guest_Additions<br />or<br />https://www.whonix.org/wiki/VirtualBox_Guest_Additions<br /><br />Those issues are probably neglectable, and some users may find it a lot more convenient to be able to resize the Whonix desktop. <br /><br />Click the Xubuntu start button and start the Ubuntu Software Center.<br />Enter &quot;virtualbox-guest-additions&quot; in the search box and select<br />&quot;Transitional package for virtualbox-guest-additions-iso / virtualbox-guest-additions&quot;.<br />Click Install and close the Ubuntu Software Center window when the installation is complete.<br /><br />In the Whonix-Workstation virtual machine window, select Devices -&gt; Install Guest Additions.<br /><br />On the Whonix desktop, doubleclick the Konsole icon.<br />Enter this line and enter your password when prommpted:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo apt-get install build-essential linux-headers-$(uname -r)</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter &quot;y&quot; and wait for the downloads and installation to be completed.<br /><br />When you see the command prompt again, enter these case sensitive lines:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo mkdir /media/cdrom<br />sudo mount /dev/sr0 /media/cdrom<br />sudo /media/cdrom/VBoxLinuxAdditions.run<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />When this is done and you see the command prompt again, enter &quot;sudo reboot&quot; to reboot the Whonix virtual machine.<br />After rebooting Whonix-Workstation you should be able to resize the Whonix desktop and use full screen resolution and other guest addition features.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 02, 2013, 08:15 pm</strong>
			</dt>
			<dd class="postbody">
				7. Finishing the installation and cleaning up<br /><br />7.1. Update Tor Browser<br /><br />On the Whonix desktop, doubleclick the Update Tor Browser icon.<br />Click Yes to start the update when prompted.<br /><br />Note that using this method to update the Tor Browser will discard your old bookmarks. They will be backed up in the Home folder however.<br /><br />7.2. (Optional, recommended) Install Xfce4<br /><br />If you prefer the look and feel of the Xubuntu desktop over the Whonix (KDE) desktop you can install Xfce4 to make Whonix look more like Xubuntu.<br />This should also speed up boot up times a little.<br /><br />Doubleclick the Konsole icon and enter these lines:<br /><br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo apt-get install xfce4 <br />sudo reboot<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter your user password when prompted. Downloading and installation should take less than 10 minutes.<br /><br />If you need to change your keyboard layout after rebooting, see step 4.1. how to do it.<br /><br />7.3. Cleaning up<br /><br />On the Whonix desktop, doubleclick the Konsole icon and enter:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo rm /var/cache/apt/archives/*deb</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter the password &quot;changeme&quot; when prompted.<br /><br />Enter the same line in the Whonix-Gateway window.<br /><br />Click the Xubuntu start button, start Accessories -&gt; Terminal Emulator and enter the same line.<br /><br />7.4. Change passwords<br /><br />This doesn&#039;t really add much security, but it is recommended that you change the default password in both Whonix-Workstation and Whonix-Gateway.<br /><br />On the Whonix desktop, start Konsole and enter &quot;passwd&quot;.<br />Enter the current password (&quot;changeme&quot;), then enter the new password two times. The password doesn&#039;t need to be overly strong.<br />This is the user password.<br /><br />Enter &quot;sudo su&quot; and enter the password.<br />Again, enter &quot;passwd&quot; and enter the new password two times. You can use the same password as before, as this doesn&#039;t add much security.<br />This is the root (admin) password.<br /><br />On the Whonix gateway, enter &quot;passwd&quot;.<br />Enter the current password (&quot;changeme&quot;), then enter the new password two times. You can use the same password you used on the Whonix workstation.<br />Enter &quot;sudo su&quot; and enter the password.<br />Again, enter &quot;passwd&quot; and enter the new password two times.<br /><br />7.5. Create a PGP key<br /><br />Click the KGpg icon on the Whonix desktop.<br />Click the small arrow on the right side of the Whonix task bar and select KGpg.<br />In the KGpg window, select Keys -&gt; Generate Key Pair<br />Enter a fake name and fake email address.<br />Set key size to 4096 and click OK.<br />Enter a strong password (20+ characters) and click OK.<br />Click OK when the key generation is finished.<br /><br />7.6 Disable automatic updates<br /><br />We don&#039;t need automatic Xubuntu updates on a persistent live system with only little space left.<br /><br />Click the Xubuntu start button -&gt; Ubuntu Software Center<br />In the Edit -&gt; Software Source select the Updates tab and set Automatically check for updates to Never.<br />Close and Software Sources window and the Ubuntu Software Center<br /><br />7.7. Backup the TrueCrypt container<br /><br />Shutdown both Whonix virtual machines.<br />On the Whonix desktop, click the KDE start button and select Leave -&gt; Shutdown. Click Turn Off Computer and OK.<br />On the Whonix gateway, enter &quot;sudo halt&quot; and enter the user password when prompted.<br /><br />On the Xubuntu desktop, open the Krypton folder, click the kryptonite file with the right mouse button and select Copy.<br />Select a destination from the panel on the right side, e.g. another USB stick, click the folder display on the right side with the right mouse button and select Paste.<br /><br />If the USB stick ever breaks, simply repeat steps 1-4 to create a new persistent Xubuntu with VirtualBox and TrueCrypt. Instead of creating a new TrueCrypt<br />container, copy the kryptonite file to the Krypton folder and mount it in TrueCrypt. That way you can create copies of the bootable USB stick within less then 15 minutes.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 02, 2013, 08:17 pm</strong>
			</dt>
			<dd class="postbody">
				8. Tor configuration<br /><br />These steps are not really necessary for Tor to function properly in most cases. It will already use entry guards, one of the main advantages over Tails.<br />You can skip steps 8.* if you don&#039;t want to use specific fast entry nodes or bridges and you don&#039;t want to block relays in certain countries from becoming the exit node.<br /><br />Selecting public entry guards in your own country (step 8.2.1.) is recommended, if you don&#039;t need to hide that you are using Tor.<br />Not hiding that you are using Tor is to be prefered over not hiding it properly. If you try to hide using Tor and don&#039;t do it properly, then this will just make you more suspcicious.<br /><br />8.1. Common Tor configuration<br /><br />In the Whonix-Gateway window, enter this line at the command prompt:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo nano /etc/tor/torrc</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Press enter and enter your Whonix-Gateway user password when prompted.<br />Scroll down to the bottom of the text by using the cursor keys or the Page Down key on your keyboard and enter these lines:<br /><br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">AvoidDiskWrites 1<br />ClientOnly 1<br />StrictNodes 1<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Press CTRL + x and enter &quot;y&quot; when prompted. Press Enter to save the text file.<br /><br />8.2. Optional Tor configuration (entry nodes, bridges, blocking exit nodes)<br /><br />To be able to copy+paste something into the Whonix-Gateway it&#039;s necessary to use SSH. You probably don&#039;t want to type fingerprints or list of bridges by hand.<br /><br />Shutdown the Whonix-Gateway by entering &quot;sudo halt&quot;.<br /><br />Select Whonix-Gateway in the VirtualBox manager and click it with the right mousebutton.<br />Select Settings and click Network and Advanced.<br />Click the Port Forwarding button and click &quot;+&quot; (Insert new rule)<br /><br />Enter these values by doubleclicking the empty fields:<br /><br />Host IP: 127.0.0.1<br />Host Port: 2200<br />Guest Port: 22<br /><br />Click OK to save the settings, click OK again to close the settings window<br /><br />Boot the Whonix-Gateway virtual machine again.<br /><br />On the Xubuntu desktop, Start Accessories -&gt; Terminal Emulator and enter<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">ssh user@localhost -p 2200</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Enter the Whonix-Gateway user password when prompted.<br /><br />At the command prompt, start the nano text editor by entering<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo nano /etc/tor/torrc</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />8.2.1. (Optional) Entry Nodes<br /><br />Instead of using random Tor entry nodes you may want to use a little selection of trusted or fast entry nodes in your own country. <br />If you prefer to use obfuscated bridges instead you can skip this step.<br /><br />Go to http://torstatus.blutmagie.de/index.php?SR=Bandwidth&amp;SO=Desc and search for 5-10 of the fastest relays in your country (top of the list = fastest relays).<br /><br />Click the relay name to get more informations about the relay and copy the fingerprint line.<br />The fingerprint looks like this: <br />CFA4 8FC3 E843 DFF0 1AA0 26EC 7701 0AB5 7E8C 2FF0 <br /><br />Copy it to the clipboard and scroll down to the bottom of the text file in the nano text editor which is running in the Terminal Emulator window.<br />Enter a new line and paste the fingerprint.<br /><br />Remove the spaces in the fingerprint and add a $ to the beginning, so it will look like this:<br />$CFA48FC3E843DFF01AA026EC77010AB57E8C2FF0 <br /><br />Do this with at least 3 relays, 5 or more are better.<br />Add commas between each fingerprint and put them all into one line, then add &quot;EntryNodes &quot; to the beginning of the line like this:<br />EntryNodes $CFA48FC3E843DFF01AA026EC77010AB57E8C2FF0,$CFA48FC3E843DFF01AA026EC77010AB57E8C2FF0,$CFA48FC3E843DFF01AA026EC77010AB57E8C2FF0 <br /><br />Unless you want to further change the Tor configuration, press CTRL + x and enter &quot;y&quot; when prompted. Press Enter to save the text file.<br /><br />8.2.2. (Optional) Bridges<br /><br />Some users may want to use obfuscated bridges. If someone is sniffing your internet connection it will be harder for them to find out that you are using Tor.<br />However bridges are less reliable and tend to have lower performance than normal entry nodes. Right now Whonix only supports obfs2 and non-obfuscated bridges by default.<br /><br />Using normal non-obfuscated bridges is pretty much useless, if someone with enough resources (China, Five Eyes, ...) is doing deep packet inspection.<br />If getting a list of obfuscated bridges is too much hassle for you, but you do need to hide the fact that you are using Tor, then you should use a VPN instead.<br /><br />See step 9. how to set up a OpenVPN connection.<br /><br />8.2.2.1. (Optional) Obfuscated bridges<br /><br />Find the &quot;## Using obfuscated bridges #&quot; section in the nano text editor which is running in the Terminal Emulator window.<br />Find the line &quot;#UseBridges 1&quot; and remove the &quot;#&quot; at the beginning of the line.<br />Find the line &quot;#ClientTransportPlugin obfs2 exec /usr/bin/obfsproxy --managed&quot; and remove the &quot;#&quot; at the beginning of the line.<br /><br />Create a new line and enter your obfs2 bridges like this:<br />Bridge obfs2 111.22.33.44:1234<br />Bridge obfs2 44.33.22.111:1234<br /><br />You should use at least enter 3 bridges, each in a seperate line.<br /><br />Go to this page and write an email to get help with obfuscated bridges:<br />https://bridges.torproject.org/<br /><br />8.2.2.2. (Optional) Normal public bridges<br /><br />If you have to use normal bridges because your ISP is blocking Tor, scroll down to the bottom of the text file in the nano text editor which is running in the Terminal Emulator window,<br />and add this line:<br />UseBridges 1<br /><br />Below that line enter the bridges like this, each in a seperate line:<br />Bridge 111.22.33.44:1234<br />Bridge 44.33.22.111:1234<br /><br />You can get a list of normal bridges from here: https://bridges.torproject.org/bridges<br /><br />Unless you want to further change the Tor configuration, press CTRL + x and enter &quot;y&quot; when prompted. Press Enter to save the text file.<br /><br />8.2.3. (Optional) Block countries from becoming the clearnet exit node<br /><br />It&#039;s possible to block certain countries from becoming the exit node. This is mostly useless, but in some rare cases it may actually be useful.<br />To block exit nodes in Five Eyes &amp; friends countries from becoming your exit node, scroll down to the bottom of the text file in the nano editor and enter this line:<br /><br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">ExcludeExitNodes {us},{gb},{ca},{au},{nz},{ie},{sg},{??},{a1},{a2},{o1}</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />You can find a list of more country codes here (these are not always the same as internet top level domains)<br />http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2<br />Do not add too many countries to the list however, as this may reduce anonymity.<br /><br />Press CTRL + x and enter &quot;y&quot; when prompted. Press Enter to save the text file.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 02, 2013, 08:17 pm</strong>
			</dt>
			<dd class="postbody">
				. (Optional) VPN<br /><br />If you need to hide that you are using Tor you may want to use a VPN instead of obfuscated bridges.<br /><br />Do not use PPTP VPN&#039;s. The PPTP protocol was developed by Microsoft and can most likely easily be decrypted by Five Eyes countries.<br />That&#039;s why this tutorial only covers the installation and usage of OpenVPN.<br /><br />Using VPN&#039;s in Sweden (or Singapore) may also offer no protection against the Five Eyes knowing about your Tor usage, as the Swedish government submissively lets the USA<br />do anything they want with Swedish internet cables. So tunneling Tor through a VPN in Sweden may make you even more interesting to the Five Eyes adversaries than simply using Tor alone.<br /><br />If you do use a VPN in a &quot;safe&quot; country (that country should also have neighbouring &quot;safe&quot; countries), then you should set up Tor to use entry guards in that country or its<br />neighbours, and make sure the traffic between the VPN and the entry guard does not pass through sea cables which have been compromised by the Five Eyes and their submissive friends.<br /><br />Note that even when using a VPN to conceal that you are using Tor, the Five Eyes may under certain circumstances still detect that you are using Tor by using time/size correlation resp. end-to-end correlation attacks.<br />To make this harder you could install a Bittorrent client and download copyrighted torrents from The Pirate Bay while using the VPN. <br />Do NOT download torrents through Whonix/Tor however, because that would make deanonymization even easier. Use Xubuntu to download torrents.<br /><br />9.1. Installing OpenVPN<br /><br />Start the Terminal Emulator and enter<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo apt-get install -y openvpn network-manager-openvpn-gnome</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />9.2. Preparing the system for OpenVPN usage<br /><br />Normally you would simply import the .ovpn file in Xubuntu start button -&gt; Settings -&gt; Network Connections -&gt; VPN, but that does not work properly in current versions of Xubuntu.<br /><br />Open the Home folder on the desktop and create a new folder named &quot;vpn&quot;.<br />Open the vpn folder and copy the .ovpn file you&#039;ve downloaded from your VPN provider into it.<br /><br />Click the background of the folder with the right mouse button and select Create Document -&gt; Empty File.<br />Enter &quot;credentials&quot; as name.<br />Doubleclick the credentials file and enter your VPN username and password in the text editor, each in a seperate line.<br />Example:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">snowden<br />r1s3.uP.4Nd.74k3.7H3.p0w3r.b4cK,17s.71m3.7H3.f47.c47s.h4d.4.h34R7.4774cK<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Save the file and close the text editor.<br /><br />Click the background of the folder with the right mouse button and select Create Document -&gt; Empty File.<br />Enter &quot;startvpn.sh&quot; as name.<br />Doubleclick the startvpn.sh file and enter these lines:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">cd /home/xubuntu/vpn<br />xterm -e &quot;sudo openvpn --config CHANGEME.ovpn --auth-user-pass credentials&quot;<br />xterm -e &quot;echo ATTENTION! The VPN has been disconnected or failed. Whonix will connect to Tor with your real IP; sleep 30&quot;<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Replace CHANGEME.ovpn with the filename of the .ovpn file you&#039;ve downloaded from your VPN provider.<br />Save the file and close the text editor.<br /><br />Click the startvpn.sh file with the right mousebutton and select Properties.<br />Select the Permissions tab and check &quot;Allow this file to run as a program&quot; and close the Properties window.<br /><br />You can now test the VPN connection by clicking the startvpn.sh icon on the desktop. <br />If you want to disconnect from the VPN, select the VPN window and press CTRL + C.<br /><br />If you ever see the message &quot;ATTENTION! The VPN has been disconnected or failed&quot; you should pause or shutdown the Whonix virtual machines immediately.<br /><br />9.2. (Optional) Create a link on the desktop<br /><br />The recommended way to start the VPN is by making it start when the Xubuntu desktop starts. <br />If instead you want to start the VPN manually by doubleclicking it, then you can create a link on the desktop.<br /><br />Note that if you forget starting the VPN before starting Whonix then your Tor usage may get detected by adversaries from secret services.<br />If you want to prevent that anyone except the VPN provider (and the secret service in the country which hosts the VPN) knows that you are using Tor you can skip this step and proceed to step 9.3.<br /><br />Click the startvpn.sh file with the right mouse button and select Send To -&gt; Desktop (Create Link).<br /><br />You can now start the VPN connection by doubleclicking the startvpn.sh icon on the Xubuntu desktop.<br /><br />9.3. (Optional) Start the VPN with the desktop<br /><br />Instead of manually starting the VPN you may want to start the VPN when the Xubuntu desktop starts.<br /><br />Click the Xubuntu start button -&gt; Settings -&gt; Settings Manager.<br />Doubleclick the Session and Startup icon and select the Application Autostart tab.<br />Click the Add button and enter VPN as name.<br />Enter /home/xubuntu/vpn/startvpn.sh in the Command text box and click OK.<br />Click Close to close the Session and Startup window.<br /><br />Reboot Xubuntu to see if the VPN starts up when booting. <br />Start the web browser and go to ip-check.info to see if your IP is concealed.<br /><br />9.4. (Optional, recommended) Cover traffic with Bittorrent<br /><br />Xubuntu already comes with the Transmission Bittorrent client pre-installed, so we only have to configure it properly.<br />As we use an 8GB USB stick we don&#039;t want to download torrents to it, but to our hard drive instead.<br />As we don&#039;t want to select a new torrent once per hour we deliberately slow down the downloads.<br /><br />Click the Xubuntu start button and select Internet -&gt; Transmission.<br />In the Transmission menu select Edit -&gt; Preferences.<br />Select the Downloading tab and change the Save to Location to a folder on your hard drive.<br />Change Maximum active downloads to 1 or 2.<br />Select the Speed tab and check the Download Speed Limit. Set it between 10-20kB/s.<br /><br />Close the Preferences window and go to http://thepiratebay.sx/browse in Firefox.<br />Find a large file with over 50 seeders (the SE number in the torrent list) and click the link.<br />On the torrent page click the &quot;GET THIS TORRENT&quot; link with the magnet icon.<br />When the Launch Application window opens, click the Choose button and browse to File System -&gt; usr -&gt; bin<br />Select the transmission-gtk file and click Open. <br />Check &quot;Remember my choice for magnet links&quot; and click OK to close the Launch Application window.<br />If a Torrent Options window pops up, click Open.<br />The torrent should now be visible in the Transmission window and start downloading after a minute.<br /><br />You can add more torrents to Transmission by clicking the &quot;GET THIS TORRENT&quot; links on various torrent pages on The Pirate Bay.<br />When one torrent download is finished the next download will start.<br /><br />You may want to start Transmission automatically when the desktop starts.<br />Click the Xubuntu start button -&gt; Settings -&gt; Settings Manager and click the Session and Startup icon.<br />Select the Application Autostart tab and click the Add button.<br />Enter Transmission as name and enter &quot;/usr/bin/transmission-gtk&quot; as the Command. Click OK to add the application to the Autostart and click Close.<br /><br />Reboot your system to see if Transmission automatically starts when the desktop starts.<br /><br />If the torrents in Transmission show errors after rebooting the system that&#039;s probably because your hard drive for the torrent downloads wasn&#039;t automatically mounted.<br />In that case simply doubleclick the icon of the hard drive on the Xubuntu desktop to mount it.<br />In the transmission window select the torrent with the error message and click the Start torrent button.<br />If the download doesn&#039;t start after a minute, close Transmission and start it again from the Xubuntu start button menu.<br /><br />You should always wait for the download to start before starting Whonix.<br />You should also always have active downloads in Transmission. Once a torrent has finished downloading you can delete it from the hard drive and start it again.<br /><br />Congratulations. You are now a Tor ninja.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 05, 2013, 09:54 pm</strong>
			</dt>
			<dd class="postbody">
				10. Using the system<br /><br />10.1. Booting<br /><br />To use the system, boot from the USB stick and start TrueCrypt.<br />Select Slot 1 and click Select File, if the file isn&#039;t selected already. Open the Krypton folder and select the kryptonite file.<br />Click the Mount button and enter the password.<br /><br />Start VirtualBox and start the Whonix-Gateway. Wait until it&#039;s booted, then start the Whonix-Workstation.<br /><br />10.2. Tor Browser<br /><br />There are 2 versions of the Tor Browser on the Whonix desktop. It is recommended that you start it with the &quot;Tor Browser Recommended...&quot; icon.<br />You may want to disable Javascript by clicking the S icon after starting Tor Browser for the first time.<br /><br />10.3. Tor status monitor<br /><br />Whonix does not include Vidalia, but the Whonix-Gateway includes ARM (anonymizing relay monitor).<br />In the Whonix-Gateway window enter &quot;sudo arm&quot; and enter your user password when prompted.<br />You can press &quot;n&quot; to get a new identity, or press &quot;m&quot; for a menu which can be navigated with the cursor keys.<br /><br />10.4. XChat<br /><br />The IRC program XChat is already installed and preconfigured to use with Tor.<br />If you want to chat in the OFTC #tor channel, doubleclick the XChat icon and select XChat -&gt; Network List in the Xchat menu.<br />Click the Connect button to connect with the IRC server, enter #tor in the text box and click OK to join the channel.<br />You can change your nickname by entering &quot;/nick something&quot; in the text box on the bottom of the XChat window.<br /><br />To get a list of more channels on the OFTC server, select Server -&gt; List of Channels in the XChat menu and click the Search button.<br />Doubleclick a channel to join it. You can also enter &quot;/join #channelname&quot; in the text box on the bottom of the XChat window to join existing channels or create your own.<br /><br />10.5. Using KGpg<br /><br />Doubleclick the KGpg icon on the Whonix desktop.<br />If you use the standard Whonix desktop, click the small arrow on the right side of the Whonix task bar and select KGpg.<br />If you installed Xfce4 desktop, click the lock icon on the top right of the desktop task bar.<br /><br />10.5.1. Adding keys<br /><br />Copy the PGP key to the clipboard and select Keys -&gt; Import Key in the KGpg window.<br />Select Clipboard and click OK.<br /><br />10.5.2. Encrypting a message<br /><br />In the KGpg menu select File -&gt; Open Editor and type your message.<br />Click the Encrypt button on the bottom of the KGpg text editor window, select a key and click OK.<br /><br />10.5.3. Decrypting a message<br /><br />In the KGpg menu select File -&gt; Open Editor and paste the encrypted message from the clipboard.<br />Click the Decrypt button on the bottom of the KGpg text editor window and enter your passphrase.<br /><br />10.6. Other apps<br /><br />If you want to install any other programs like Pidgin, doubleclick the Apper icon on the desktop.<br /><br /><br /><br />See the Whonix documentation for further details:<br />http://zo7fksnun4b4v4jv.onion/wiki/Documentation<br />or<br />https://www.whonix.org/wiki/Documentation
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>September 08, 2013, 05:40 pm</strong>
			</dt>
			<dd class="postbody">
				The tutorial has been updated. Step 9 explains how to tunnel Tor through OpenVPN and how to make traffic correlation attacks harder by using Transmission (Bittorrent) cover traffic.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Bootable and Encrypted Whonix on 8GB USB Stick</strong><br />
				Post by: <strong>neplusultra</strong> on <strong>September 08, 2013, 05:49 pm</strong>
			</dt>
			<dd class="postbody">
				Nice contribution!
			</dd>
		</dl>
		<div id="footer" class="smalltext">
			
			<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://dkn255hz262ypmii.onion/index.php?action=credits" title="Simple Machines Forum" target="_blank" class="new_win">SMF 2.0.5</a> |
 <a href="http://www.simplemachines.org/about/smf/license.php" title="License" target="_blank" class="new_win">SMF &copy; 2013</a>, <a href="http://www.simplemachines.org" title="Simple Machines" target="_blank" class="new_win">Simple Machines</a>
			</span>
		</div>
	</body>
</html>