<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="robots" content="noindex" />
		<link rel="canonical" href="http://dkn255hz262ypmii.onion/index.php?topic=202364.0" />
		<title>Print Page - Tutorial: Portable Encrypted Whonix on a Windows USB Stick</title>
		<style type="text/css">
			body, a
			{
				color: #000;
				background: #fff;
			}
			body, td, .normaltext
			{
				font-family: Verdana, arial, helvetica, serif;
				font-size: small;
			}
			h1#title
			{
				font-size: large;
				font-weight: bold;
			}
			h2#linktree
			{
				margin: 1em 0 2.5em 0;
				font-size: small;
				font-weight: bold;
			}
			dl#posts
			{
				width: 90%;
				margin: 0;
				padding: 0;
				list-style: none;
			}
			dt.postheader
			{
				border: solid #000;
				border-width: 1px 0;
				padding: 4px 0;
			}
			dd.postbody
			{
				margin: 1em 0 2em 2em;
			}
			table
			{
				empty-cells: show;
			}
			blockquote, code
			{
				border: 1px solid #000;
				margin: 3px;
				padding: 1px;
				display: block;
			}
			code
			{
				font: x-small monospace;
			}
			blockquote
			{
				font-size: x-small;
			}
			.smalltext, .quoteheader, .codeheader
			{
				font-size: x-small;
			}
			.largetext
			{
				font-size: large;
			}
			.centertext
			{
				text-align: center;
			}
			hr
			{
				height: 1px;
				border: 0;
				color: black;
				background-color: black;
			}
		</style>
	</head>
	<body>
		<h1 id="title">Silk Road forums</h1>
		<h2 id="linktree">Discussion => Security => Topic started by: Bazille on August 15, 2013, 06:28 pm</h2>
		<dl id="posts">
			<dt class="postheader">
				Title: <strong>Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 15, 2013, 06:28 pm</strong>
			</dt>
			<dd class="postbody">
				This tutorial explains step by step how to create an encrypted portable USB stick with Whonix, which you can start directly from Microsoft Windows without rebooting.<br />Don&#039;t be put off by having to type stuff in the command line, you will mostly only have to do this during installation. <br /><br />Completing the tutorial produces a torified Linux installation, similar to Tails. The main advantage over Tails is complete encryption and complete persistence.<br />Furthermore, compared with Tails, Whonix makes it even harder for attackers to find out your real IP address by using root exploits against your browser, because the virtual desktop machine can&#039;t connect to the internet even when someone gets admin privileges.<br /><br />As Whonix is based on good old Debian, you will receive (security) updates directly from the Debian servers, so you won&#039;t have to download a new version of Whonix all the time.<br /><br />For a comparison between Tails and Whonix, have a look at this page:<br />http://zo7fksnun4b4v4jv.onion/wiki/Comparison_with_Others<br /><br />Whonix feature list:<br />http://zo7fksnun4b4v4jv.onion/wiki/Features<br /><br />Whonix preinstalled software:<br />http://zo7fksnun4b4v4jv.onion/wiki/Software<br /><br />Whonix documentation:<br />http://zo7fksnun4b4v4jv.onion/wiki/Documentation<br /><br />System requirements:<br />* Microsoft Windows XP or higher (it&#039;s possible to run it on Mac and Linux, if you&#039;re know what you&#039;re doing)<br />* 8GB USB stick or better<br /><br />Time needed to complete the tutorial: 3+ hours<br /><br />Don&#039;t send me private messages asking for support. Use this thread to ask your questions instead.<br /><br />CC-BY Bernd Liefert, 15.08.2013<br /><br /><br /><br /><br />[WARNING]<br />After you&#039;ve removed the USB stick from the machine, it may be possible to tell that you&#039;ve used TrueCrypt and VirtualBox by looking at the Windows registry. However it&#039;s not possible to tell that Tor was used or what else was run from the USB stick. Putty, VirtualBox and TrueCrypt do not get installed onto your hard drive.<br />[/WARNING]
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 15, 2013, 06:29 pm</strong>
			</dt>
			<dd class="postbody">
				1. Prepare your 8GB USB stick or SD card<br /><br />Format the USB stick either with NTFS (Windows Vista or later) or exFAT (Windows XP or later). Formatting the USB stick with FAT won&#039;t be sufficient due to file size limits.<br /><br />2. Download software<br /><br />2.1. TrueCrypt<br /><br />Get the latest stable version of TrueCrypt for Windows from http://www.truecrypt.org/downloads<br /><br />Start the installer and choose &quot;Extract&quot; instead of &quot;Install&quot;. Choose your USB stick as destination.<br />If you don&#039;t want to use an USB stick, simply extract it to some folder.<br /><br />2.2. VirtualBox (portable)<br /><br />Get the portable version of VirtualBox from http://www.vbox.me/<br />(click &quot;Download and run Portable-VirtualBox_xxxxx-Win_all.exe&quot;)<br /><br />Run the installer and choose your USB stick as destination<br /><br />2.3. Whonix<br /><br />Download Whonix-Gateway.ova and Whonix-Workstation.ova from here:<br />https://whonix.org/wiki/Download<br /><br />Don&#039;t put these files on your USB stick.<br /><br />2.4. Putty (SSH)<br /><br />As we may want to be able to copy + paste Tor configuration options into the gateway, we ned a SSH client.<br />Download this file and copy it to your USB stick:<br /><br />http://the.earth.li/~sgtatham/putty/latest/x86/putty.exe
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 15, 2013, 06:31 pm</strong>
			</dt>
			<dd class="postbody">
				3. Installation and preparation<br /><br />3.1. TrueCrypt<br /><br />Start &quot;TrueCrypt.exe&quot; from your USB stick and click the &quot;Create Volume&quot; button<br />Click &quot;Next&quot; to create an encrypted file container<br />Click &quot;Next&quot; to make it a standard TrueCrypt volume<br />Click &quot;Select File&quot; and open your USB stick, enter filename: &quot;crypt&quot; and click &quot;Save&quot;<br />Optionally check &quot;Never save history&quot;, or keep it unchecked for more convenience<br />Click &quot;Next&quot; to leave the encryption algorithm at its default values<br />Select MB and enter &quot;7500&quot; to have a encrypted container with 7.5GB size. If your USB stick is larger than 8GB you may want to increase the size, to have more room for snapshots and additional software<br />Enter a reasonably long password, preferably with more than 20 characters, and click &quot;Next&quot;<br />Click &quot;Next&quot; because we don&#039;t need large files<br />Click &quot;Format&quot; and wait until the container creation is complete.<br />Click &quot;Exit&quot; when done<br /><br />Switch to the remaining TrueCrypt window or start TrueCrypt again and select a drive letter, in this tutorial it will be L:<br />Click &quot;Select File&quot;, browse to your USB stick and select the &quot;crypt&quot; file you have created<br />Click &quot;Mount&quot; and enter the password of your TrueCrypt container<br /><br />The TrueCrypt container will now appear as drive L: in your Computer. You will have to always use the same drive letter in future, or VirtualBox will not find the files.<br /><br />3.2. VirtualBox<br /><br />3.2.1. Import Whonix<br /><br />Start &quot;Portable-VirtualBox.exe&quot; from the USB stick<br />Click File -&gt; Preferences<br />Click &quot;Default Machine Folder&quot; and select &quot;Other&quot;<br />Browse to drive L: and click OK<br />Click OK to close the Settings window<br /><br />Click File -&gt; Import Appliance and click the Open appliance button<br />Browse to the folder you&#039;ve downloaded the Whonix files to and select &quot;Whonix-Gateway.ova&quot;<br />Click Next, then click Import<br /><br />Click File -&gt; Import Appliance and click the Open appliance button<br />Browse to the folder you&#039;ve downloaded the Whonix files to and select &quot;Whonix-Workstation.ova&quot;<br />Click Next, then click Import<br /><br />Cook some coffee or roll a joint, because this will take a while. When both virtual machines show up in your VirtualBox Manager, proceed to the next step.<br /><br />3.2.2. Configure virtual machines<br /><br />3.2.2.1. Whonix Gateway<br /><br />Select &quot;Whonix-Gateway&quot; and click it with the right mousebutton<br />Select &quot;Settings&quot; and click &quot;System&quot;<br />Click the &quot;Processor&quot; tab increase the number of cores<br />Select &quot;Network&quot; and click &quot;Advanced&quot;<br />Click the &quot;Port Forwarding&quot; button and click &quot;+&quot; (Insert new rule)<br /><br />Enter these values by doubleclicking the empty fields:<br /><br />Host IP: 127.0.0.1<br />Host Port: 2200<br />Guest Port: 22<br /><br />Click OK to save the settings, click OK again to close the settings window<br /><br />3.2.2.2. Whonix Workstation<br /><br />Select &quot;Whonix-Workstation&quot; and click it with the right mousebutton<br />Select the Advanced tab and set &quot;Shared Clipboard&quot; to &quot;Host-to-Guest&quot; or &quot;Bidirectional&quot;<br />Select &quot;System&quot; and increase base memory size, if you keep lots of tabs open in your browser<br />Click the &quot;Processor&quot; tab increase the number of cores<br />(Optional) Select &quot;Shared Folders&quot; and click the &quot;+&quot; icon (Add Shared Folder)<br />(Optional) Select the folder you want to have access to from within the virtual machine and check &quot;Auto-Mount&quot;<br /><br />Click OK to close the settings window and proceed to the next step.
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 15, 2013, 06:32 pm</strong>
			</dt>
			<dd class="postbody">
				4. Setting up Whonix<br /><br />4.1. Gateway configuration<br /><br />Select &quot;Whonix-Gateway&quot; and click the green Start arrow<br /><br />After a few seconds a message should appear: &quot;Starting whonixcheck in 60 seconds...&quot;<br />Wait until this message appears: &quot;Checking for operating system updates...&quot;<br /><br />Press enter so you can see the command prompt (user@host:~$ )<br /><br />At any time, Press the right CTRL key on your keyboard to get back the mouse pointer.<br /><br />4.1.1. (Optional) Keyboard layout<br /><br />Whonix is using a US keyboard layout as default, which is quite a headache for some people outside the USA.<br />If you are from the USA, ignore this step and proceed to step 4.1.2.<br /><br />At the command prompt enter this line (use the &quot;-&quot; character from the numpad if necessary)<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo dpkg-reconfigure console-data</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter the password &quot;changeme&quot; and use the cursor keys to &quot;Select keymap from arch list&quot;<br /><br />Select appropriate keyboard layout<br />Select your language<br />Selet keyboard variant<br />Select keymap (any if you don&#039;t know what exactly you&#039;re using)<br /><br />Your keyboard should work properly now. If it doesn&#039;t, enter the above command again.<br /><br />4.1.2. Gateway passwords<br /><br />At the command prompt again, type &quot;passwd&quot;. Enter the default password &quot;changeme&quot;, then enter a new password. This password doesn&#039;t need to be strong.<br /><br />Type &quot;su&quot; and enter the root password (&quot;changeme&quot;)<br />Enter a new password. You can use the same password as you&#039;ve used above, as this doesn&#039;t add much security.<br /><br />4.1.3. Gateway software update<br /><br />Enter this line at the command prompt:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">apt-get update &amp;&amp; apt-get dist-upgrade</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter Y to download the packages<br />When there is a question (*** something (Y/I/N/O/D/Z) [default=N] ?), press enter<br /><br />When you see the command prompt (user@host:~$) again, proceed to the next step.<br /><br />4.1.4. Allowing SSH connections from your desktop<br /><br />Enter <br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">nano /usr/local/bin/whonix_firewall</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Press CTRL + w and enter &quot;gateway_allow&quot;<br />Change the line GATEWAY_ALLOW_INCOMMING_SSH=0<br />to GATEWAY_ALLOW_INCOMMING_SSH=1<br /><br />Press CTRL + x, press &quot;y&quot; and enter<br /><br />Back at the command prompt, enter this line and enter &quot;y&quot; if prompted:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">apt-get install openssh-server</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />When you see the command prompt again, enter &quot;reboot&quot;<br /><br />4.2. Workstation configuration<br /><br />Select &quot;Whonix-Workstation&quot; and click the green Start arrow. When the KDE desktop finished booting, close the &quot;whonixcheck&quot; window.<br />At any time, Press the right CTRL key on your keyboard to get back the mouse pointer.<br /><br />4.2.1. (Optional) Keyboard layout<br /><br />Users from the USA can skip this step, others may need to do this.<br /><br />Click the start button at the bottom left of the desktop and select Applications -&gt; Settings -&gt; System Settings <br />Doubleclick Input Devices and select the Layouts tab<br />Check &quot;Configure Layouts&quot;, click the +Add button and click the Layout dropdown selector<br />Choose the language of your keyboard and click OK<br />Select &quot;us English (US)&quot; and click Remove<br />Click Apply and close the window<br /><br />4.2.2. Workstation passwords<br /><br />Click the Konsole icon on the desktop<br /><br />At the command prompt, type &quot;passwd&quot;. Enter the default password &quot;changeme&quot;, then enter a new password. This password doesn&#039;t need to be strong.<br /><br />Type &quot;su&quot; and enter the root password (&quot;changeme&quot;)<br />Enter a new password. You can use the same password as you&#039;ve used above, as this doesn&#039;t add much security.<br /><br />4.2.3. Workstation software update<br /><br />Enter this line at the command prompt:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">apt-get update &amp;&amp; apt-get dist-upgrade</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter Y to download the packages<br /><br />Packages will be downloaded and installed, this can take 30+ minutes, depending on your location.<br /><br />When there is a question (*** something (Y/I/N/O/D/Z) [default=N] ?), press enter.<br />When you see the command prompt (root@host:~$) again, proceed to the next step.<br /><br />4.2.4. VirtualBox Guest Additions<br /><br />To be able to use copy + paste, resize the desktop and use mouse pointer integration, we need to install the VirtualBox Guest additions.<br /><br />In the Konsole window, enter this line:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">apt-get install --no-install-recommends virtualbox-guest-dkms virtualbox-guest-utils</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Enter &quot;y&quot; when prompted.<br /><br />When you see the command prompt again, enter this line:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">apt-get install virtualbox-guest-x11</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />When installation is done, enter &quot;reboot&quot;.<br /><br />Once the virtual machine rebooted and the desktop is loaded, you should be able to increase the desktop size by resizing the VirtualBox window. <br />Furthermore you should be able to copy + paste text from your Windows desktop to the KDE desktop, and the virtual machine should stop capturing your mouse pointer.<br /><br />If that works, proceed right to step 5.<br />If that didn&#039;t work, then the VirtualBox Guest Additions weren&#039;t installed properly due to version issues. In that case we have to install them through VirtualBox itself.<br /><br />Click the Konsole icon on the desktop and enter this line and enter your user password when prommpted:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo apt-get install build-essential linux-headers-$(uname -r)</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />When you see the command prompt again, enter these lines:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo mkdir /media/cdrom<br />sudo mount /dev/sr0 /media/cdrom<br />sudo /media/cdrom/VBoxLinuxAdditions.run<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Enter &quot;y&quot; when prompted and reboot the virtual machine. You can do this by clicking the KDE start button and clicking &quot;Leave&quot;.<br />&nbsp;
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 15, 2013, 06:32 pm</strong>
			</dt>
			<dd class="postbody">
				5. Tor configuration<br /><br />The Tor Server is running on the Whonix-Gateway virtual machine, which doesn&#039;t support copy + paste. To make the configuration of Tor easier, we have to use a SSH client on the Windows desktop.<br /><br />Start putty.exe from the USB stick<br />Enter Hostname 127.0.0.1 and Port 2200, then click Open and increase the size of the Putty window<br />At the login prompt (&quot;login as:&quot;) enter &quot;user&quot; and enter the user password you set during the Whonix-Gateway installation<br /><br />5.1. Common Tor configuration<br /><br />Enter this line at the command prompt (you can paste the text by clicking the right mousebutton inside the Putty window):<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo nano /etc/tor/torrc</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Press enter and enter your Whonix-Gateway user password when prompted<br />Scroll down to the bottom of the text by using the cursor keys or the Page Down key on your keyboard<br /><br />Paste these lines into Putty:<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">AvoidDiskWrites 1<br />ClientOnly 1<br />StrictNodes 1<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />5.2. (Optional) Define exit node countries<br /><br />Many people don&#039;t recommend this, because it may make you less anonymous, but I prefer to have my exit nodes in countries which are not part of the NSA&#039;s PRISM program. <br />If you don&#039;t set any exit nodes yourself, then Tor will randomly choose exit nodes for you. As there is a huge amount of exit nodes running in the USA and other PRISM partner countries, <br />you will often use exit nodes which can be sniffed by the NSA. However, as many websites are in the USA and PRISM partner countries, this is no ultimate protection against getting sniffed by the NSA.<br /><br />By adding the next line to the bottom of /etc/tor/torrc we make Tor only use ExitNodes in Asia, South Africa and Russia: <br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">ExitNodes {hk},{tw},{za},{in},{id},{th},{vn},{cn},{ru}</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div> <br />You can find a list of more country codes here (these are not always the same as internet top level domains)<br />http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2<br /><br />Note that not all countries have a large amount of ExitNodes, and that it&#039;s better if Tor has more than 20 ExitNodes to choose from. Most ExitNodes in this example will most likely be slow, except the ones in China (probably run by their secret service) and Russia. South Korea and Japan also has a lot of ExitNodes, but they may be too friendly with the NSA, so they haven&#039;t been added to the list.<br />&nbsp;<br />5.3. (Optional) Define entry node countries<br /><br />If there are enough Tor relays in your country, you should only use EntryNodes in your country. If you are in the USA, add this line to the end of /etc/tor/torrc:<br /><br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">EntryNodes {us} <br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />If you are not from the USA, check the above list of country codes to find out which code your country uses. These are not internet top level domains.<br /><br />If you want to use specific trusted EntryNodes in your country, e.g. because you always want to have a fast entry node with large bandwidth, then you can specify those by using fingerprints. <br />In this case You should at least add 3 EntryNodes then, better more.<br /><br />manning2.torservers.net, bolobolo1.torservers.net and manning1.torservers.net are among the fastest EntryNodes in the USA (and the world) right now, so you may want to use them, if you live in the USA.<br />Instead of using the above EntryNodes example, you&#039;d have to use something like this:<br /><br />EntryNodes $D0236B1908B3CC686DB0A361F4931073A25793F1,$9F7A37446BC034B4FDB27CAE2C6CAAB83A40A361,$073F27934762FF8BA956FFCE136AAC1CCF45EA13 <br /><br />To get more fingerprints of servers, go to http://torstatus.blutmagie.de/ and click on the servernames. Copy the fingerpint line and add a $ in front of each fingerprint. Seperate individual fingerprints in the config with commas. Remove spaces in the fingerprints. You should use at least 3-10 fingerprints as entry nodes.<br /><br />5.4. (Optional) Tor bridges<br /><br />Instead of using public EntryNodes you may want to use Tor bridges, but this may not help against NSA sniffing. They may know the bridges from https://bridges.torproject.org/ anyway. To have a very secret bridge you&#039;d have to use hidden bridges run by your friends. As with the EntryNodes, you should use at least 5-10 bridges.<br /><br />To use bridges you&#039;d have to add the line<br /><br />UseBridges 1<br /><br />to the end of your /etc/tor/torrc. To get a list of bridges, go to https://bridges.torproject.org/bridges and copy the list of IP addresses it shows you. Paste the addresses at the end of your /etc/tor/torrc text file and add &quot;Bridge &quot; (note the space) before each IP address. <br /><br />This will however not show you only bridges from your country, but from random countries. When you connect to a bridge in another country, then it is more likely that one or more secret services sniff your traffic. This would allow them to do time/size correlation when you browse clearnet websites.<br /><br />It may be best if you skip the Tor bridges part and only use the EntryNodes part of this tutorial, unless you know how to find out in which countries those bridges are hosted. If you do use bridges, then the EntryNodes line will be ignored by Tor.<br /><br /><br /><br /><br />Once you&#039;re done with the Tor configuration text file, save it by pressing CTRL + x followed by pressing &quot;y&quot; the enter key
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 15, 2013, 06:33 pm</strong>
			</dt>
			<dd class="postbody">
				6. Preparing Tor Browser<br /><br />Do not use the &quot;Update Tor Browser&quot; icon on the KDE desktop to update the browser, unless you&#039;re ok with losing all your browser settings. <br />If you don&#039;t mind losing your browser settings and bookmarks every time you update the browser, and you don&#039;t want to use Vidalia, ignore step 6.1.<br /><br />Click the &quot;Start Tor Browser&quot; icon on the desktop and <br />[IMPORTANT]<br />DEACTIVATE JAVASCRIPT<br />[/IMPORTANT]<br />by clicking the &quot;S&quot; icon next to the green onion icon in the browser and selecting &quot;Forbid Script Globally&quot;<br /><br />You can then configure your browser as desired, but don&#039;t change the language. Otherwise you may become more pseudonymous than anonymous.<br /><br /><br />6.1. Updating Tor Browser<br /><br />After starting the Tor Browser, follow the link to the download page<br /><br />Download &quot;Tor Browser Bundle for GNU/Linux&quot;<br />Click Launch Application and OK<br />Click Save<br />Click &lt; User &gt; to change the download folder to your home folder<br />Click Save<br />Close the browser window<br /><br />Click the Konsole icon on the KDE desktop and type &quot;ls&quot;<br />Select the filename of the downloaded archive by holding the left mousebutton (something like &quot;tor-browser-gnu-linux-i686-2.3.25-12-dev-en-US.tar.gz&quot;)<br />Click the selection with the right mouse button and select Copy<br />Type &quot;tar -zxf &quot; (with trailing space), click inside the Konsole window with the right mouse button and select Paste<br />When you see the command prompt again and no error message gets displayed, then the browser has been updated<br /><br />Use the &quot;Start Tor Browser&quot; button, because &quot;Tor Browser Recommended&quot; will most likely cease to function. You can delete this icon, and the &quot;Update Tor Browser&quot; icon from the KDE desktop to avoid confusion.<br />If necessary you can still start the other browser by using the KDE start menu.<br /><br /><br />6.2. Testing the browser configuration<br /><br />Go to http://ip-check.info and click START TEST!<br />All attributes should be green or orange.<br /><br />Go to http://panopticlick.eff.org and click TEST ME<br />You should see something like &quot;Within our dataset of several million visitors, only one in 642 browsers have the same fingerprint as yours.&quot;<br /><br />6.3. (optional) Uptodate version of Firefox<br /><br />If Torbrowser annoys you, you can additionally install the latest version of Firefox. It will automatically get torified by Whonix. The configuration files are stored in another place than those of Tor Browser.<br />Using Torbrowser is probably safer however.<br /><br />To do this, start Konsole from the desktop and enter &quot;sudo su&quot;, enter your user password when prompted.<br />Then paste these lines:<br /><br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">echo -e &quot;\ndeb http://downloads.sourceforge.net/project/ubuntuzilla/mozilla/apt all main&quot; | tee -a /etc/apt/sources.list &gt; /dev/null<br />apt-key adv --recv-keys --keyserver keyserver.ubuntu.com C1289A29<br />apt-get update<br />apt-get install firefox-mozilla-build<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />You can now start Firefox through the KDE start button -&gt; Applications -&gt; Internet -&gt; Browser<br /><br />To make it more anonymous than pseudonymous, complete step 7 of my other tutorial (Xubuntu). Unfortunately the language part in about:config doesn&#039;t seem to work in this installation.<br />Link to the other tutorial step 7: http://dkn255hz262ypmii.onion/index.php?topic=201405.msg1445799#msg1445799<br /><br /><br />7. Preparing PGP<br /><br />7.1. Install PGP tools<br /><br />KPGP doesn&#039;t work in the current version of Whonix. Let&#039;s use Seahorse and Geany instead.<br /><br />Click the Konsole icon on the KDE desktop and enter<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">apt-get install seahorse geany geany-plugin-pg pinentry-gtk2 gpa</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Enter your user password when prompted, and enter &quot;y&quot; when prompted.<br /><br />Start Development -&gt; Geany from the KDE start button<br />In the Geany window, open Tools menu -&gt; Plugin Manager, check &quot;GeanyPG&quot; and click &quot;OK&quot;<br /><br />7.2. Creating your PGP key<br /><br />You can skip this step if you already have a GnuPG keyring from another Linux machine. Simply copy the .gnupg folder to /home/user<br /><br />Click the start button and enter &quot;seahorse&quot; into the search box<br />Click &quot;Passwords and Keys&quot; with the right mouse button and select &quot;Add to Desktop&quot;<br /><br />Start Passwords and Keys from the start menu or from the desktop<br />Click &quot;+&quot; and select PGP key<br />Enter a fake name, fake email and click Advanced key options<br />Set Key Strength to 4096 and click Create
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 15, 2013, 06:34 pm</strong>
			</dt>
			<dd class="postbody">
				8. Using Whonix<br /><br />Congratulations. The installation of Whonix is complete. You can now create snapshots in VirtualBox if you like. However it is not recommended (by overly paranoid people) to use the Restore Snapshoot feature of VirtualBox every time, instead you should properly shutdown the virtual machines (start button on desktop or &quot;sudo halt&quot; on the command line/gateway) and boot them normally when you want to use Whonix again. Especially the snapshot of the Whonix-Gateway should not get restored every time you use Whonix. Instead you should restore the snapshot only if you broke something or you think you may have been under attack by malware. <br /><br />[WARNING]<br />If you restore a snapshot, all changes made after the snapshot will be lost. So if you&#039;ve made important changes to Whonix or the browser, you may want to create another snapshot and delete the old one.<br />[/WARNING]<br /><br />Before taking the snapshot you may also want to disable the Shared Clipboard feature from the Devices menu in VirtualBox. Overly paranoid users do not recommend to have this turned on all the time.<br /><br />To create a snapshot, click the &quot;Machine&quot; menu in the running virtual machine window and select &quot;Take Snapshot&quot;. You can basically create an unlimited number of snapshots, this is only limited by the size of your TrueCrypt container. Deleting a snapshot will merge it with the previous machine state, so the changes you made before taking the snapshot will be made permanent.<br /><br />8.1. Booting the virtual machines<br /><br />Plug the USB stick into a Windows computer, open the USB drive folder and start Truecrypt.exe<br />Select the drive letter you used while creating the TrueCrypt container (in this tutorial we used drive letter L:)<br />Click the &quot;Select File&quot; button and choose the &quot;crypt&quot; file on your USB stick<br />Click &quot;Mount&quot; and enter your TrueCrypt password<br /><br />Start Portable-VirtualBox.exe from the USB stick<br />If it displays an error message you can usually ignore it<br /><br />Click the green Start arrow to start Whonix-Gateway and wait until it&#039;s booted<br />Click the green Start arrow to start Whonix-Workstation<br /><br /><br />8.2. Using PGP<br /><br />[IMPORTANT]<br /><br />PGP is broken in the current version of this tutorial. You can encrypt messages, but you can&#039;t decrypt them.<br /><br />Until this has been fixed you can use GPG4USB to create a key and to encrypt/decrypt text.<br /><br />Download GPG4USB from http://gpg4usb.cpunk.de to the /home/user folder<br />Click the Konsole icon on the desktop and enter the following line<br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">sudo apt-get install unzip</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Click the &quot;Dolphin File Manager&quot; icon in the KDE task bar<br />Click gpg4usb-xxxx.zip with the right mousebutton and select Extract -&gt; Extract Archive Here<br /><br />You can start the program by using the Dolphin File Manager and clicking the &quot;start_linux&quot; icon in the gpg4usb folder.<br /><br />[/IMPORTANT]<br /><br /><br />You can either use GNU Privacy Assistant or Seahorse to manage PGP keys.&nbsp; GPA can be started by click the start button -&gt; Applications -&gt; GNU Privacy Assistant.<br />Seahorse (Passwords and Keys) can be started from the icon you created on the desktop.<br /><br />8.2.1. Adding public PGP keys to your keyring<br /><br />To add a public PGP key to your list, copy it to your clipboard and start Passwords and Keys from the KDE desktop<br />Open the &quot;Edit&quot; menu and click &quot;Paste&quot;<br /><br />To see the newly added key, click View -&gt; Show any<br /><br />(Important) Click the newly imported key with your right mousebutton, select Properties, click the Trust tab and click the &quot;Sign this Key&quot; button<br />(Important) In the &quot;Sign Key&quot; window select &quot;Casually&quot; or &quot;Very Carefully&quot;, click the &quot;Sign&quot; button and enter your PGP passphrase<br /><br />You can now close the &quot;Passwords and Keys&quot; window again or add some more keys. The last 2 steps are important because otherwise Geany will refuse to encrypt your messages later.<br /><br />8.2.2. Encrypting text with Geany<br /><br />Start Development -&gt; Geany and type or paste your text into the editor<br />Select the whole text, either with Edit -&gt; Select All or by pressing CTRL + A<br />Open Tools -&gt; GeanyPG -&gt; Encrypt, select the recipient(s) and click the &quot;OK&quot; button<br /><br />Select the encrypted text and copy it to your clipboard.<br /><br />8.2.3. Decrypting text with Geany<br /><br />This is broken in the current version of this tutorial.<br /><br />Start Development -&gt; Geany and paste the encrypted text into the editor<br />Select the whole text, either with Edit -&gt; Select All or by pressing CTRL + A<br />Open Tools -&gt; GeanyPG -&gt; Decrypt/Verify and enter your PGP passphrase<br /><br />8.2.4. Copying your own public PGP key to the clipboard with Seahorse<br /><br />Start Settings -&gt; Passwords and Keys and select the &quot;My Personal Keys&quot; tab<br />Click the key you want to copy with the right mousebutton and select &quot;Copy&quot;<br />You can now paste the key into your browser, text editor etc.<br /><br />8.3. Changing Tor configuration<br /><br />You can change the configuration of Tor by using Vidalia on the Whonix-Workstation, if you installed the Tor Browser update as suggested in this tutorial. <br />However it may be better to make those changes on the Whonix-Gateway instead, by using Putty as described in step 5.<br /><br />8.4. Using shared folders<br /><br />If you specified shared folders at step 3.2.2.2., have a look at this page to understand how to access them:<br />http://zo7fksnun4b4v4jv.onion/wiki/VirtualBox_Guest_Additions#Shared_Folder<br /><br />8.5. Updating Whonix<br /><br />You have to update both, Whonix-Workstation and Whonix-Gateway seperately. <br /><br />Whonix-Workstation: Open Konsole and enter &quot;sudo apt-get update &amp;&amp; apt-get upgrade&quot;<br />Whonix-Gateway: Open Konsole and enter &quot;sudo apt-get update &amp;&amp; apt-get upgrade&quot;<br /><br />If you want to upgrade not only the software, but the whole OS, you have to use &quot;apt-get dist-upgrade&quot; instead.<br /><br />See this page on how to upgrade the OS in an overly paranoid way:<br />http://zo7fksnun4b4v4jv.onion/wiki/Install_Software#How_to_install_or_update_with_most_caution.3F<br /><br /><br /><br /><br />Do you have any suggestions or questions about this tutorial? Was there any problem during installation? <br />Post it in this thread. Don&#039;t send me a private message.<br /><br />You may also use the Whonix forum to ask your questions, anonymous posting is allowed:<br />http://zo7fksnun4b4v4jv.onion/wiki/Special:AWCforum/sf/id5/General_Discussion.html
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>astor</strong> on <strong>August 15, 2013, 08:05 pm</strong>
			</dt>
			<dd class="postbody">
				<div class="quoteheader"><div class="topslice_quote"><a href="http://dkn255hz262ypmii.onion/index.php?topic=202364.msg1454412#msg1454412">Quote from: Bazille on August 15, 2013, 06:28 pm</a></div></div><blockquote class="bbc_standard_quote">[WARNING]<br />1. For some unknown reason PGP makes problems in Whonix (Whonix is experimental software). You can encrypt messages, but you can&#039;t decrypt them. So unfortunately this tutorial is mostly useless for vendors right now.<br />The tutorial will be updated once a fix has been found.<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />I couldn&#039;t even launch Kpgp, but GPG4USB works well in the Whonix Workstation, or on any 32 bit Linux. A lot of people already have experience with it, too. It&#039;s portable, so just download, extract, and use as normal.<br />
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 16, 2013, 03:38 pm</strong>
			</dt>
			<dd class="postbody">
				I just figured out Kgpg actually does run, but it hides/minimizes to the tray after start. Fucking KDE desktop. I think I&#039;ll add a &quot;replace KDE with Xfce&quot; step to the guide. Will also have a look at GPG4USB. <br /><br />Edit:<br /><br />The tutorial has been updated. There is now a way to decrypt PGP messages with GPG4USB. The downside is that you can&#039;t copy your .gnupg folder from another installation (e.g. Tails). You&#039;d have to import your keys in another way. See step 8.2. for more information about how to install GPG4USB.<br /><br />I&#039;ve also removed the warnings about clearnet traffic. I was under the impression that Whonix updates software packages through the clearnet, but this is not the case. I used an IP traffic monitor (iptraf) to see what connections Whonix makes to the internet and saw that it uses Tor to update software packages.<br />
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>BlackIris</strong> on <strong>August 16, 2013, 04:23 pm</strong>
			</dt>
			<dd class="postbody">
				Good tutorial also if a bit over-complicated for a beginner imo (but naturally the complication is a point in the favor of the tutorial if are more advanced). <br /><br />I actually prefer Chrome over Firefox so I use it instead in in my Whonix Guest (another benefit of Whonix) with almost all plug-ins + JavaScript disabled and history blocked. All the &quot;complicacy&quot; about adding the TOR bundle as in this tutorial gets removed in this way. <br /><br />P.S.: Concerning the old astor&#039;s thread about Whonix, he wrote there that you need to create maps or onion addresses cannot be resolved on their own but I found out that it actually was not so and they worked by themselves (not immediately but the browser &quot;corrected&quot; the address and then entered permanently - this with Chrome) and actually creating addresses made it so that certain sites didn&#039;t work (as for example Atlantis because it considered the attempt as phishing site).
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>astor</strong> on <strong>August 16, 2013, 05:02 pm</strong>
			</dt>
			<dd class="postbody">
				<div class="quoteheader"><div class="topslice_quote"><a href="http://dkn255hz262ypmii.onion/index.php?topic=202364.msg1458106#msg1458106">Quote from: Bazille on August 16, 2013, 03:38 pm</a></div></div><blockquote class="bbc_standard_quote">I just figured out Kgpg actually does run, but it hides/minimizes to the tray after start. Fucking KDE desktop. I think I&#039;ll add a &quot;replace KDE with Xfce&quot; step to the guide.<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Son of a bitch, was that it? Yeah, I don&#039;t like KDE either. It&#039;s the main reason I use my own Workstations in Whonix.<br /><br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">The tutorial has been updated. There is now a way to decrypt PGP messages with GPG4USB... See step 8.2. for more information about how to install GPG4USB.<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />That should be useful for many people. A largish percentage of this community uses GPG4USB, to the point that they run it in Tails, which already comes with a GUI PGP program (by way of the Gedit text encryption plugin). They&#039;re just used to GPG4USB.<br />
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>QuickSilverHawk</strong> on <strong>August 16, 2013, 05:11 pm</strong>
			</dt>
			<dd class="postbody">
				<div class="quoteheader"><div class="topslice_quote"><a href="http://dkn255hz262ypmii.onion/index.php?topic=202364.msg1458313#msg1458313">Quote from: astor on August 16, 2013, 05:02 pm</a></div></div><blockquote class="bbc_standard_quote"><div class="quoteheader"><div class="topslice_quote"><a href="http://dkn255hz262ypmii.onion/index.php?topic=202364.msg1458106#msg1458106">Quote from: Bazille on August 16, 2013, 03:38 pm</a></div></div><blockquote class="bbc_alternate_quote">I just figured out Kgpg actually does run, but it hides/minimizes to the tray after start. Fucking KDE desktop. I think I&#039;ll add a &quot;replace KDE with Xfce&quot; step to the guide.<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />Son of a bitch, was that it? Yeah, I don&#039;t like KDE either. It&#039;s the main reason I use my own Workstations in Whonix.<br /><br /><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_alternate_quote">The tutorial has been updated. There is now a way to decrypt PGP messages with GPG4USB... See step 8.2. for more information about how to install GPG4USB.<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />That should be useful for many people. A largish percentage of this community uses GPG4USB, to the point that they run it in Tails, which already comes with a GUI PGP program (by way of the Gedit text encryption plugin). They&#039;re just used to GPG4USB.<br /></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br />I have you to thank for learning basics of PGP (you are the one with the tutorial, I think/hope?). :)
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>ananas_xpress</strong> on <strong>August 16, 2013, 05:46 pm</strong>
			</dt>
			<dd class="postbody">
				Awesome, I&#039;ve been meaning to try this out 
			</dd>
			<dt class="postheader">
				Title: <strong>Re: Tutorial: Portable Encrypted Whonix on a Windows USB Stick</strong><br />
				Post by: <strong>Bazille</strong> on <strong>August 16, 2013, 08:16 pm</strong>
			</dt>
			<dd class="postbody">
				Another step has been added. Step 6.3. explains how to install the latest version of Firefox. <br /><br />I could also write another tutorial how to make a bootable USB stick with Whonix virtual machines on it. However that couldn&#039;t be accessed from the Windows desktop. You&#039;d have to reboot your computer every time to use it, like Tails. It would work on any computer with modern AMD and Intel CPU, including Macs. Anyone interested?<br /><br />I&#039;m still using the Xubuntu with Firefox 23 from my first tutorial btw. But I&#039;m not a vendor, and I&#039;m not posting anything on the clearnet which could get LE interested in me. If I was a vendor I would use a bootable Whonix USB stick, or physically isolated Whonix installations on 2 computers. At least until I copied all the important features of Whonix to my Xubuntu.
			</dd>
		</dl>
		<div id="footer" class="smalltext">
			
			<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://dkn255hz262ypmii.onion/index.php?action=credits" title="Simple Machines Forum" target="_blank" class="new_win">SMF 2.0.5</a> |
 <a href="http://www.simplemachines.org/about/smf/license.php" title="License" target="_blank" class="new_win">SMF &copy; 2013</a>, <a href="http://www.simplemachines.org" title="Simple Machines" target="_blank" class="new_win">Simple Machines</a>
			</span>
		</div>
	</body>
</html>